<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>地址管理 梁彩凤</title>
    <link rel="stylesheet" href="../layui/css/layui.css" media="all">
    <link rel="stylesheet" href="../style/css/install.css">
    <link rel="stylesheet" href="../style/css/setaddress.css">
    <script src="../style/js/jquery-3.4.1.js"></script>
    <style>

    </style>
</head>
<body>

<iframe src="nav.html" frameborder="no" border="0" width="100%" scrolling="no" height="180px" style="z-index: 10"></iframe>
<div class="con">
    <div class="pull_left" style="height: 865px;">
        <ul class="nav">
            <li class="title">账户中心</li>
            <li class="">
                <a href="install.html">我的资料</a>
            </li>
            <li class="">
                <a href="install-pwd.html">修改密码</a>
            </li>
            <li class="">
                <a href="install-phone.html">修改手机号</a>
            </li>
            <li class="active">
                <a href="#">收货地址</a>
            </li>
            <li class="">
                <a href="install-third.html">第三方账户绑定</a>
            </li>
            <li class="title">用户中心</li>
            <li class="">
                <a href="#">续报中心</a>
            </li>
            <li class="">
                <a href="#">跨版本难度换课</a>
            </li>
            <li class="title">订单中心</li>
            <li class="">
                <a href="install-order.html">我的订单</a>
            </li>
            <li class="">
                <a href="install-invoice.html">我的发票</a>
            </li>
            <li class="title">资产中心</li>
            <li class="">
                <a href="#">我的余额</a>
            </li>
            <li class="">
                <a href="#">优惠券</a>
            </li>
            <li class="">
                <a href="#">学习卡</a>
            </li>
        </ul>
    </div>
    <div class="pull_right_a">
        <div class="pwd-top">
            <h3>地址管理</h3>
        </div>
        <div style="padding: 20px;margin: 20px 0;">
            <p class="siteTitle">
                你已创建
                <em>&nbsp;0&nbsp;</em>
                个收货地址，最多可以创建
                <em>&nbsp;10&nbsp;</em>
                个&nbsp;&nbsp;&nbsp;&nbsp;
                <span style="color: #f13232;">如需要修改订单配送地址，请前往【我的订单】
                    <a href="" style="color: #999;">点击跳转</a>
                </span>
                <div class="base-box" style="width: 234px;float: right;margin-top: -42px;">
                    <button id="c-show" class="el-button" style="font-size: 13.5px;">新增收货地址</button>
                </div>
            </p>
            <div class="addrList">
                <ul>
                    <li>
                        <span title="依依" class="Consignee">依依</span>
                        <span class="addressInfos">北京市&nbsp;&nbsp;市辖区&nbsp;&nbsp;东城区&nbsp;&nbsp;sad sd</span>
                        <span class="hidePhone">151****7761</span>
                        <ul class="operate">
                            <li class="defaultBtn">设为常用地址</li>
                            <li class="editBtn">编辑</li>
                            <li class="delBtn">删除</li>
                        </ul>
                    </li>
                </ul>
            </div>
        </div>
        <div class="address"
             style="width: 960px;margin-top:50px;border-top: 1px solid #ccc;padding:30px 20px;display: none">
            <p style="font-size: 16px;color: #666;">新增收货地址
                <span class="img-s">
                    <img src="../style/images/x.png" height="20" width="20" id="c-hide">
                </span>
            </p>
            <div style="padding: 20px 30px">
                <form class="el-form demo-ruleForm">
                    <div class="el-form-item">
                        <label class="el-form-item__label">收货人</label>
                        <div class="el-form-item__content" style="margin-left: 88px;">
                            <div class="el-input">
                                <input type="text" id="user" class="el-input__inner">
                                <span style="color: #999;">请准确填写真实姓名</span>
                            </div>
                        </div>
                    </div>
                    <div class="box">
                        <label class="el-form-item__label">所在地区</label>
                        <div class="qrm-pinming">

                            <div class="qrm-input-border">
                                <input type="text" placeholder="请选择" class="qrm-input" style="width: 204px">
                            </div>
                            <!--<div class="qrm-pinming-panel" style="display:none">-->
                            <div class="qrm-border1" style="display:none">
                                <ul class="qrm-lev-1 qrm-lev" id="na">
                                    <!--统料-->
                                </ul>
                                <p class="clearfix"></p>
                            </div>
                            <div class="qrm-border2" style="display:none">
                                <ul class="qrm-lev-2 qrm-lev">

                                </ul>
                                <p class="clearfix"></p>
                            </div>
                            <div class="qrm-border3" style="display:none">
                                <ul class="qrm-lev-3 qrm-lev">

                                </ul>
                                <p class="clearfix"></p>
                            </div>
                            <div class="qrm-border4" style="display:none">
                                <ul class="qrm-lev-4 qrm-lev">

                                </ul>
                                <p class="clearfix"></p>
                            </div>
                            <p class="clearfix"></p>
                            <!--</div>-->
                            <p class="clearfix"></p>
                        </div>
                    </div>

                    <div class="el-form-item">
                        <label class="el-form-item__label">详细地址</label>
                        <div class="el-form-item__content" style="margin-left: 88px;">
                            <div class="passWord el-input">
                                <input type="text" id="add" class="el-input__inner">
                                <span style="color: #999;">请填写详细路名及门牌号</span>
                            </div>
                        </div>
                    </div>
                    <div class="el-form-item">
                        <label class="el-form-item__label">手机号码</label>
                        <div class="el-form-item__content" style="margin-left: 88px;">
                            <div class="passWord el-input">
                                <input type="tel" id="tel" class="el-input__inner">
                                <span style="color: #999;">用于接收发货通知短信和送货前通知</span>
                            </div>
                        </div>
                    </div>
                    <div class="base-box" style="padding: 10px 0">
                        <button class="el-button" id="btu" style="margin-left:88px;font-size: 13.5px;">保存收货人地址</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>
<script src="../layui/layui.js"></script>
<script>
    $(document).ready(function () {
        $("#c-hide").click(function () {
            $(".address").hide();
        });
        $("#c-show").click(function () {
            $(".address").show();
        });
        $("#btu").click(function () {
            var user = $("#user").val();
            var add = $("#add").val();
            var tel = $("#tel").val();
            var di = $("#di").val();
            if (user == "" || add == "" || tel == "")
            {
                alert("请输入完整的信息")
            }else{
                console.log(user,di,add,tel)
            }

            return false;
        });
    });
</script>
<script>

    layui.use(['form', 'layer'], function () {
        $ = layui.jquery;
        var form = layui.form
            , layer = layui.layer;

        form.on('submit(edi)', function (data) {
            // if ()
        });
    })
</script>
<script>
    $(function () {


        $(document).ready(function() {
            $.ajax({
                url : "a.json",
                type : "POST",
                async : true,
                dataType : "json",
                success : function(res) {
                    console.log(res.data)
                    $('#na')[0].innerHTML = '';

                    for(item in res.data){
                        console.log(res.data[item].province)
                        var bgin = '<li class="">\
                                        <span>' + res.data[item].province + '</span><i class="qrm-arrow-right"></i>\
                                        <ul class="li-zi-1" style="display: none">\
                                    '
                        for(it in res.data[item].city) {
                            console.log(res.data[item].city[it].name)
                            bgin += '<li>\
                                        <span>' + res.data[item].city[it].name + '</span><i class="qrm-arrow-right"></i>\
                                        <ul class="li-zi-2" style="display: none">\
                                    '
                            console.log(bgin)
                            for(i in res.data[item].city[it].area) {
                                console.log(res.data[item].city[it].area[i].aname)
                                bgin += '<li>\
                                            <span>' + res.data[item].city[it].area[i].aname + '</span>\
                                        </li>\
                                    '
                                console.log(bgin)
                            }
                            bgin += '</ul>\
                                </li>\
                            '
                        }
                        bgin += '</ul>\
                            </li>\
                                ';
                        $('#na')[0].innerHTML += bgin;    //输出列表

                    }

                },
                error : function(xhr) {
                    alert("错误提示： " + xhr.status + " " + xhr.statusText);
                }
            });
        });


        //控制边框高亮
        $(".qrm-input-border").click(function () {
            if($(".qrm-pinming").css("background-image").indexOf("qrm-arrow-down")!==-1){
                if($(".qrm-input").val() == ''){
                    $(".qrm-pinming").css("background-image","url(../style/images/qrm-arrow-top.png)");
                    $(".qrm-pinming").css("border","1px solid #409EFF");
                    $(".qrm-border1").show();
                }else{
                    var s=$(".qrm-input").val()
                    console.log(s)
                    var n=(s.split('/')).length-1;
                    console.log(n)
                    if(n==1){
                        $(".qrm-border1").show();
                        $(".qrm-border2").show();
                    }else if (n==2){
                        $(".qrm-border1").show();
                        $(".qrm-border2").show();
                        $(".qrm-border3").show();
                    }
                    $(".qrm-pinming").css("background-image","url(../style/images/qrm-arrow-top.png)");
                    $(".qrm-pinming").css("border","1px solid #409EFF");
                }
            }else {
                $(".qrm-border1").hide();
                $(".qrm-border2").hide();
                $(".qrm-border3").hide();
                $(".qrm-pinming").css("border","1px solid #ddd");
                $(".qrm-pinming").css("background-image","url(../style/images/qrm-arrow-down.png)");
            }
        });
        //第一层
        var lev1;
        var lev2;
        var lev3;
        //第一层 事件代理
        $("body").on("click",".qrm-lev-1>li",function () {
            //控制背景颜色高亮
            $(this).addClass("active").siblings("li").removeClass("active");
            // 先将input中的值置空
            lev1="";
            lev2="";
            lev3="";
            // 获取当前点击的li的子元素的HTML节点 将获取的节点放到页面显示的第二级中
            var html1=$(this).children(".li-zi-1").html();
            $(".qrm-lev-2").html(html1);
            $(".qrm-border2").show();
            $(".qrm-border3").hide();
            $(".qrm-lev-3").html("");
//      $(".qrm-lev-4").html("");
            //获取当前点击的li的span中的值 将值传到input中
            lev1=$(this).children("span").html();
//      $(".qrm-input").val("");
//      $(".qrm-input").val(lev1);
        });
        //第二层 事件代理

        $("body").on("click",".qrm-lev-2>li",function () {
            $(this).addClass("active").siblings("li").removeClass("active");
//      console.log($(this).children(".li-zi-2").html())
            if($(this).children(".li-zi-2").html()== undefined){
                lev2=$(this).children("span").html();
                $(".qrm-input").val(lev1+"/"+lev2);
                $(".qrm-border1").hide();
                $(".qrm-border2").hide();
                $(".qrm-border3").hide();
                $(".qrm-pinming").css("border","1px solid #ddd");
                $(".qrm-pinming").css("background-image","url(../style/images/qrm-arrow-down.png)");
            }else{
                var html2=$(this).children(".li-zi-2").html();
                lev2=$(this).children("span").html();
                $(".qrm-border3").show();
                $(".qrm-lev-3").html(html2);
            }
            if($(this).parent().parent().next().children(".qrm-lev").html()==""){
                // 去掉输入框的高亮状态
                $(".qrm-border1").hide();
                $(".qrm-border2").hide();
                $(".qrm-border3").hide();
                $(".qrm-pinming").css("border","1px solid #ddd");
                $(".qrm-pinming").css("background-image","url(../style/images/qrm-arrow-down.png)");
            }
//      $(".qrm-lev-4").html("");
//      $(".qrm-input").val(lev1+"/"+lev2);
        });
        //第三层 事件代理
        $("body").on("click",".qrm-lev-3>li",function () {
            $(this).addClass("active").siblings("li").removeClass("active");
            var html3=$(this).children(".li-zi-3").html();
            lev3=$(this).children("span").html();
//      $(".qrm-lev-4").html(html3);
            $(".qrm-input").val(lev1+"/"+lev2+"/"+lev3);
            $(".qrm-border1").hide();
            $(".qrm-border2").hide();
            $(".qrm-border3").hide();
            $(".qrm-pinming").css("border","1px solid #ddd");
            $(".qrm-pinming").css("background-image","url(../style/images/qrm-arrow-down.png)");
            if($(this).parent().parent().next().children(".qrm-lev").html()==""){
                // 去掉输入框的高亮状态
                $(".qrm-input").val(lev1+"/"+lev2);
                $(".qrm-border1").hide();
                $(".qrm-border2").hide();
                $(".qrm-border3").hide();
                $(".qrm-pinming").css("border","1px solid #ddd");
                $(".qrm-pinming").css("background-image","url(../style/images/qrm-arrow-down.png)");
            }
        });

    });
    //点击空白处隐藏div
    $(document).click(function(event){
        var x1 = $('.box');  // 设置目标区域
        if(!x1.is(event.target) && x1.has(event.target).length === 0){ // Mark 1
            $(".qrm-border1").hide();
            $(".qrm-border2").hide();
            $(".qrm-border3").hide();
            $(".qrm-pinming").css("border","1px solid #ddd");
            $(".qrm-pinming").css("background-image","url(../style/images/qrm-arrow-down.png)");
            //$('#divTop').slideUp('slow');  //滑动消失
//         $('.qrm-pinming-panel').hide(300);     //淡出消失
        }
    });
</script>


</body>
</html>